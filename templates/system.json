{
  "_id": "{{@ system @}}",
  "headers": {
    "Authorization": "$SECRET(api_key)",
    "wix-site-id": "{{@ account_id @}}"
  },
  "operations": {
    "contacts-delete": {
      "id_expression": "{{ id }}",
      "method": "DELETE",
      "payload_property": "contact",
      "url": "contacts/v4/contacts/{{ entity['$source']['id'] }}"
    },
    "contacts-insert": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "contact",
      "url": "contacts/v4/contacts"
    },
    "contacts-list": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "next_page_link": "{{@ base_url @}}/contacts/v4/contacts",
      "next_page_termination_strategy": [
        "not-full-page",
        "empty-result"
      ],
      "page_size": 1000,
      "params": {
        "paging.limit": "{{ page_size }}",
        "paging.offset": "{{ page_size|int*page }}"
      },
      "payload_property": "contacts",
      "url": "contacts/v4/contacts"
    },
    "contacts-lookup": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "payload_property": "contact",
      "url": "contacts/v4/contacts/{{ entity['$source']['id'] }}"
    },
    "contacts-update": {
      "id_expression": "{{ id }}",
      "method": "PATCH",
      "payload_property": "contact",
      "url": "contacts/v4/contacts/{{ entity['$source']['id'] }}"
    },
    "inventory-delete": {
      "id_expression": "{{ id }}",
      "method": "DELETE",
      "payload_property": "inventoryItems",
      "url": "stores/v2/inventoryItems/{{ entity['$source']['id'] }}"
    },
    "inventory-insert": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "inventoryItems",
      "url": "stores/v2/inventoryItems"
    },
    "inventory-list": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "next_page_link": "{{@ base_url @}}/stores/v2/inventoryItems/query",
      "next_page_termination_strategy": [
        "empty-result",
        "not-full-page"
      ],
      "page_size": 1000,
      "payload": {
        "query": {
          "paging": {
            "limit": "{{ page_size }}",
            "offset": "{{ page_size|int*page }}"
          }
        }
      },
      "payload_property": "inventoryItems",
      "url": "stores/v2/inventoryItems/query"
    },
    "inventory-lookup": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "inventoryItem",
      "url": "stores/v2/inventoryItems/{{ entity['$source']['id'] }}/getVariants"
    },
    "inventory-update": {
      "id_expression": "{{ id }}",
      "method": "PATCH",
      "payload_property": "inventoryItem",
      "url": "stores/v2/inventoryItems/product/{{ entity['$source']['id'] }}"
    },
    "members-delete": {
      "id_expression": "{{ id }}",
      "method": "DELETE",
      "payload_property": "member",
      "url": "members/v1/members/{{ entity['$source']['id'] }}"
    },
    "members-insert": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "member",
      "url": "members/v1/members"
    },
    "members-list": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "next_page_link": "{{@ base_url @}}/members/v1/members",
      "next_page_termination_strategy": [
        "empty-result",
        "not-full-page"
      ],
      "page_size": 1000,
      "params": {
        "paging.limit": "{{ page_size }}",
        "paging.offset": "{{ page_size|int*page }}"
      },
      "payload_property": "members",
      "url": "members/v1/members"
    },
    "members-lookup": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "payload_property": "member",
      "url": "members/v1/members/{{ entity['$source']['id'] }}"
    },
    "members-update": {
      "id_expression": "{{ id }}",
      "method": "PATCH",
      "payload_property": "member",
      "url": "members/v1/members/{{ entity['$source']['id'] }}"
    },
    "orders-delete": {
      "id_expression": "{{ id }}",
      "method": "DELETE",
      "payload_property": "order",
      "url": "stores/v2/orders/{{ entity['$source']['id'] }}"
    },
    "orders-insert": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "order",
      "url": "stores/v2/orders"
    },
    "orders-list": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "next_page_link": "{{@ base_url @}}/stores/v2/orders/query",
      "next_page_termination_strategy": [
        "empty-result",
        "not-full-page"
      ],
      "page_size": 100,
      "payload": {
        "query": {
          "paging": {
            "limit": "{{ page_size }}",
            "offset": "{{ page_size|int*page }}"
          }
        }
      },
      "payload_property": "orders",
      "url": "stores/v2/orders/query"
    },
    "orders-lookup": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "payload_property": "order",
      "url": "stores/v2/orders/{{ entity['$source']['id'] }}"
    },
    "orders-update": {
      "id_expression": "{{ id }}",
      "method": "PATCH",
      "payload_property": "order",
      "url": "stores/v2/orders/{{ entity['$source']['id'] }}"
    },
    "products-delete": {
      "id_expression": "{{ id }}",
      "method": "DELETE",
      "payload_property": "product",
      "url": "stores/v1/products/{{ entity['$source']['id'] }}"
    },
    "products-insert": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "payload_property": "product",
      "url": "stores/v1/products"
    },
    "products-list": {
      "id_expression": "{{ id }}",
      "method": "POST",
      "next_page_link": "{{@ base_url @}}/stores/v1/products/query",
      "next_page_termination_strategy": [
        "empty-result",
        "not-full-page"
      ],
      "page_size": 100,
      "payload": {
        "query": {
          "paging": {
            "limit": "{{ page_size }}",
            "offset": "{{ page_size|int*page }}"
          }
        }
      },
      "payload_property": "products",
      "url": "stores/v1/products/query"
    },
    "products-lookup": {
      "id_expression": "{{ id }}",
      "method": "GET",
      "payload_property": "product",
      "url": "stores/v1/products/{{ entity['$source']['id'] }}"
    },
    "products-update": {
      "id_expression": "{{ id }}",
      "method": "PATCH",
      "payload_property": "product",
      "url": "stores/v1/products/{{ entity['$source']['id'] }}"
    },
    "currencies-list": {
      "id_expression": "{{ code }}",
      "method": "GET",
      "payload_property": "currencies",
      "url": "currency_converter/v1/currencies"
    }
  },
  "type": "system:rest",
  "url_pattern": "{{@ base_url @}}/%s",
  "verify_ssl": true
}
